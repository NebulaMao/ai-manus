# AI Manus å…¨æ ˆæ¶æ„æ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

| å±æ€§ | å€¼ |
|------|-----|
| **é¡¹ç›®åç§°** | AI Manus - é€šç”¨AI Agentç³»ç»Ÿ |
| **æ¶æ„ç‰ˆæœ¬** | v4.0 |
| **åˆ›å»ºæ—¥æœŸ** | 2025-11-04 |
| **ä½œè€…** | Winston (æ¶æ„å¸ˆ) |
| **æ¶æ„é£æ ¼** | å¾®æœåŠ¡ + DDD + å®¹å™¨åŒ– |
| **æ–‡æ¡£ç±»å‹** | å…¨æ ˆæ¶æ„è®¾è®¡ |

---

## ğŸš€ ä»‹ç»

æœ¬æ–‡æ¡£æ¦‚è¿°äº† AI Manus çš„å®Œæ•´å…¨æ ˆæ¶æ„ï¼ŒåŒ…æ‹¬åç«¯ç³»ç»Ÿã€å‰ç«¯å®ç°åŠå…¶é›†æˆã€‚å®ƒä½œä¸ºAIé©±åŠ¨å¼€å‘çš„å•ä¸€äº‹å®æ¥æºï¼Œç¡®ä¿æ•´ä¸ªæŠ€æœ¯æ ˆçš„ä¸€è‡´æ€§ã€‚

è¿™ç§ç»Ÿä¸€çš„æ–¹æ³•ç»“åˆäº†ä¼ ç»Ÿä¸Šåˆ†ç¦»çš„åç«¯å’Œå‰ç«¯æ¶æ„æ–‡æ¡£ï¼Œç®€åŒ–äº†ç°ä»£å…¨æ ˆåº”ç”¨ç¨‹åºçš„å¼€å‘æµç¨‹ï¼Œå› ä¸ºè¿™äº›åº”ç”¨ç¨‹åºçš„å…³æ³¨ç‚¹æ—¥ç›Šç´§å¯†ç›¸è¿ã€‚

### å¯åŠ¨æ¨¡æ¿æˆ–ç°æœ‰é¡¹ç›®

**ç°æœ‰é¡¹ç›®**: AI Manus æ˜¯ä¸€ä¸ªåŸºäºç°æœ‰å¾®æœåŠ¡æ¶æ„çš„å…¨æ ˆAI Agentç³»ç»Ÿï¼Œå·²ç»åœ¨ä»¥ä¸‹æŠ€æœ¯æ ˆä¸Šå®ç°äº†åŸºç¡€åŠŸèƒ½ï¼š

**å·²é…ç½®çš„æŠ€æœ¯é€‰æ‹©å’Œçº¦æŸ**:
- **å‰ç«¯**: Vue 3 + TypeScript + Vite (å·²å®ç°)
- **åç«¯**: FastAPI + Python + DDD (å·²å®ç°)
- **æ•°æ®åº“**: MongoDB + Redis (å·²å®ç°)
- **å®¹å™¨åŒ–**: Docker + Docker Compose (å·²å®ç°)
- **é€šä¿¡**: SSE + WebSocket (å·²å®ç°)
- **æ²™ç®±**: ç‹¬ç«‹Dockerå®¹å™¨ç¯å¢ƒ (å·²å®ç°)

**å¯ä¿®æ”¹ä¸å¿…é¡»ä¿ç•™**:
- **å¯ä»¥ä¿®æ”¹**: ä¸šåŠ¡é€»è¾‘æ‰©å±•ã€æ–°å¢åŠŸèƒ½ã€æ€§èƒ½ä¼˜åŒ–
- **å¿…é¡»ä¿ç•™**: å¾®æœåŠ¡æ¶æ„ã€DDDåˆ†å±‚ã€å®¹å™¨éš”ç¦»ã€å®‰å…¨æœºåˆ¶

---

## ğŸ“ˆ é«˜å±‚æ¶æ„

### æŠ€æœ¯æ€»ç»“

AI Manus é‡‡ç”¨å¾®æœåŠ¡æ¶æ„ï¼Œç»“åˆé¢†åŸŸé©±åŠ¨è®¾è®¡(DDD)å’Œå®¹å™¨åŒ–éƒ¨ç½²ã€‚å‰ç«¯ä½¿ç”¨Vue 3 + TypeScriptæ„å»ºå“åº”å¼ç•Œé¢ï¼Œé€šè¿‡SSEå’ŒWebSocketä¸FastAPIåç«¯è¿›è¡Œå®æ—¶é€šä¿¡ã€‚æ¯ä¸ªç”¨æˆ·ä¼šè¯åœ¨ç‹¬ç«‹çš„Dockerå®¹å™¨ä¸­è¿è¡Œï¼Œç¡®ä¿å®‰å…¨éš”ç¦»ã€‚

ç³»ç»Ÿæ”¯æŒAI Agentç®¡ç†ã€å·¥å…·é›†æˆã€å®æ—¶ç›‘æ§å’Œæ•°æ®åˆ†æï¼Œä¸ºç”¨æˆ·æä¾›å®Œæ•´çš„AIåŠ©æ‰‹è§£å†³æ–¹æ¡ˆã€‚è¯¥æ¶æ„å¹³è¡¡äº†å®‰å…¨æ€§ã€å¯æ‰©å±•æ€§å’Œå¼€å‘è€…ä½“éªŒï¼Œæ”¯æŒä»ç ”ç©¶çº§åˆ°ä¼ä¸šçº§çš„åº”ç”¨åœºæ™¯ã€‚

### å¹³å°å’ŒåŸºç¡€è®¾æ–½é€‰æ‹©

**å¹³å°**: è‡ªæ‰˜ç®¡äº‘åŸç”Ÿæ¶æ„

**é€‰æ‹©åˆ†æ**:
- **Vercel + Supabase**: é€‚åˆå¿«é€ŸåŸå‹ï¼Œä½†æ— æ³•æ»¡è¶³å¤æ‚å®¹å™¨åŒ–éœ€æ±‚
- **AWS Full Stack**: åŠŸèƒ½å®Œæ•´ä½†æˆæœ¬è¿‡é«˜ï¼Œè¿ç»´å¤æ‚
- **è‡ªæ‰˜ç®¡ + Docker**: æœ€ä½³å¹³è¡¡ç‚¹ï¼Œå®Œå…¨æ§åˆ¶å®¹å™¨ç¯å¢ƒï¼Œé€‚åˆAI Agentåœºæ™¯

**æ ¸å¿ƒæœåŠ¡**:
- Dockerå®¹å™¨ç®¡ç†
- MongoDBæ–‡æ¡£æ•°æ®åº“
- Redisç¼“å­˜å’Œä¼šè¯å­˜å‚¨
- Nginxåå‘ä»£ç†
- ç›‘æ§å’Œæ—¥å¿—ç³»ç»Ÿ

**éƒ¨ç½²ä¸»æœºå’ŒåŒºåŸŸ**: æ”¯æŒç§æœ‰äº‘å’Œå…¬æœ‰äº‘éƒ¨ç½²ï¼Œæ¨èåŒºåŸŸï¼šäºšå¤ª-æ–°åŠ å¡

### ä»“åº“ç»“æ„

**ç»“æ„**: Monorepo with å¾®æœåŠ¡

**Monorepoå·¥å…·**: åŸç”Ÿç»“æ„ï¼ˆæ— Nx/Turborepoï¼‰

**åŒ…ç»„ç»‡**:
- **ç‰©ç†åˆ†ç¦»**: å‰ç«¯ã€åç«¯ã€æ²™ç®±ã€æ¨¡æ‹ŸæœåŠ¡ç‹¬ç«‹ç›®å½•
- **å…±äº«é…ç½®**: æ ¹ç›®å½•ç»Ÿä¸€Docker Composeå’Œç¯å¢ƒé…ç½®
- **æ¥å£å¥‘çº¦**: OpenAPIè§„èŒƒç¡®ä¿å‰åç«¯æ¥å£ä¸€è‡´æ€§

### é«˜å±‚æ¶æ„å›¾

```mermaid
graph TB
    subgraph "ç”¨æˆ·å±‚"
        U[ç”¨æˆ·æµè§ˆå™¨]
        VNC[VNCå®¢æˆ·ç«¯]
    end

    subgraph "å‰ç«¯å±‚"
        FE[Vue 3 Frontend<br/>Port: 5173]
    end

    subgraph "APIç½‘å…³å±‚"
        NGINX[Nginxåå‘ä»£ç†<br/>Port: 80/443]
    end

    subgraph "åº”ç”¨å±‚"
        BE[Backend API<br/>FastAPI<br/>Port: 8000]
        SB[Sandbox API<br/>FastAPI<br/>Port: 8080]
        MS[Mock Server<br/>Python<br/>Port: 9000]
    end

    subgraph "å®æ—¶é€šä¿¡"
        SSE[SSEæµ]
        WS[WebSocket]
    end

    subgraph "æ•°æ®å±‚"
        MDB[(MongoDB<br/>Port: 27017)]
        RDS[(Redis<br/>Port: 6379)]
        GFS[GridFSæ–‡ä»¶å­˜å‚¨]
    end

    subgraph "æ²™ç®±ç¯å¢ƒ"
        CONTAINER[Dockerå®¹å™¨<br/>Port: 5900-VNC]
        CHROME[Chromeæµè§ˆå™¨]
        TOOLS[å¼€å‘å·¥å…·]
    end

    U --> NGINX
    VNC --> CONTAINER
    NGINX --> FE
    FE --> BE
    FE --> SB
    BE --> MDB
    BE --> RDS
    BE --> GFS
    SB --> MDB
    SB --> RDS
    BE --> MS
    BE -.-> SSE
    FE -.-> SSE
    FE -.-> WS
    BE -.-> WS
    CONTAINER --> CHROME
    CONTAINER --> TOOLS
```

### æ¶æ„æ¨¡å¼

- **å¾®æœåŠ¡æ¶æ„**: ç‹¬ç«‹éƒ¨ç½²çš„æœåŠ¡ï¼ŒèŒè´£æ˜ç¡®
- **é¢†åŸŸé©±åŠ¨è®¾è®¡**: ä¸šåŠ¡é€»è¾‘ä¸æŠ€æœ¯å®ç°åˆ†ç¦»
- **CQRSæ¨¡å¼**: è¯»å†™åˆ†ç¦»ï¼Œä¼˜åŒ–æ€§èƒ½
- **äº‹ä»¶é©±åŠ¨æ¶æ„**: å¼‚æ­¥æ¶ˆæ¯å¤„ç†ï¼Œå®æ—¶å“åº”
- **å®¹å™¨åŒ–éƒ¨ç½²**: Dockerå®¹å™¨åŒ–ï¼Œç¯å¢ƒä¸€è‡´æ€§
- **APIç½‘å…³æ¨¡å¼**: ç»Ÿä¸€å…¥å£ï¼Œè·¯ç”±å’Œè®¤è¯

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### æŠ€æœ¯æ ˆè¡¨

| ç±»åˆ« | æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” | é€‰æ‹©ç†ç”± |
|------|------|------|------|----------|
| Frontend Language | TypeScript | 5.0+ | ç±»å‹å®‰å…¨çš„JavaScript | æé«˜ä»£ç è´¨é‡ï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯ |
| Frontend Framework | Vue 3 | 3.4+ | æ¸è¿›å¼å‰ç«¯æ¡†æ¶ | å­¦ä¹ æ›²çº¿å¹³ç¼“ï¼Œæ€§èƒ½ä¼˜ç§€ï¼Œç”Ÿæ€ä¸°å¯Œ |
| UI Component Library | Tailwind CSS + Reka UI | Latest | åŸå­åŒ–CSS + ç»„ä»¶åº“ | å¿«é€Ÿå¼€å‘ï¼Œè®¾è®¡ä¸€è‡´æ€§ï¼Œå¯å®šåˆ¶æ€§å¼º |
| State Management | Composition API | Built-in | Vue 3çŠ¶æ€ç®¡ç† | ç®€åŒ–çŠ¶æ€ç®¡ç†ï¼Œå‡å°‘æ ·æ¿ä»£ç  |
| Backend Language | Python | 3.10+ | åç«¯å¼€å‘è¯­è¨€ | AIç”Ÿæ€ä¸°å¯Œï¼Œå¼€å‘æ•ˆç‡é«˜ |
| Backend Framework | FastAPI | 0.104+ | é«˜æ€§èƒ½Webæ¡†æ¶ | è‡ªåŠ¨APIæ–‡æ¡£ï¼Œç±»å‹æç¤ºï¼Œå¼‚æ­¥æ”¯æŒ |
| API Style | REST + SSE + WebSocket | - | APIé€šä¿¡æ–¹å¼ | RESTå…¼å®¹æ€§å¥½ï¼ŒSSE/WebSocketæ”¯æŒå®æ—¶ |
| Database | MongoDB | 7.0+ | æ–‡æ¡£å‹ä¸»æ•°æ®åº“ | çµæ´»çš„æ–‡æ¡£ç»“æ„ï¼Œé€‚åˆAI Agenté…ç½® |
| Cache | Redis | 7.0+ | å†…å­˜ç¼“å­˜å’Œä¼šè¯ | é«˜æ€§èƒ½ç¼“å­˜ï¼Œæ”¯æŒå¤šç§æ•°æ®ç»“æ„ |
| File Storage | GridFS | Built-in | å¤§æ–‡ä»¶å­˜å‚¨ | MongoDBå†…ç½®ï¼Œæ— ç¼é›†æˆ |
| Authentication | å¤šç§æ”¯æŒ | - | ç”¨æˆ·è®¤è¯ | æ”¯æŒå¯†ç ã€OAuthã€SSOç­‰å¤šç§æ–¹å¼ |
| Frontend Testing | Vitest + Vue Test Utils | Latest | å‰ç«¯å•å…ƒæµ‹è¯• | ä¸Viteæ·±åº¦é›†æˆï¼Œå¿«é€Ÿæ‰§è¡Œ |
| Backend Testing | Pytest | Latest | åç«¯æµ‹è¯•æ¡†æ¶ | åŠŸèƒ½ä¸°å¯Œï¼Œæ’ä»¶ç”Ÿæ€å¥½ |
| E2E Testing | Playwright | Latest | ç«¯åˆ°ç«¯æµ‹è¯• | è·¨æµè§ˆå™¨æ”¯æŒï¼ŒAPIå‹å¥½ |
| Build Tool | Vite | 5.0+ | å‰ç«¯æ„å»ºå·¥å…· | å¿«é€Ÿçƒ­æ›´æ–°ï¼Œç°ä»£åŒ–æ„å»ºä½“éªŒ |
| Bundler | Rollup | Built-in | æ¨¡å—æ‰“åŒ… | ä¸Viteé›†æˆï¼Œtree-shakingä¼˜ç§€ |
| IaC Tool | Docker Compose | 2.0+ | å®¹å™¨ç¼–æ’ | ç®€å•æ˜“ç”¨ï¼Œé€‚åˆä¸­å°è§„æ¨¡éƒ¨ç½² |
| CI/CD | GitHub Actions | Latest | æŒç»­é›†æˆéƒ¨ç½² | ä¸GitHubæ·±åº¦é›†æˆï¼Œå…è´¹é¢åº¦å……è¶³ |
| Monitoring | è‡ªå®šä¹‰ | - | ç³»ç»Ÿç›‘æ§ | åŸºäºä¸šåŠ¡éœ€æ±‚å®šåˆ¶ç›‘æ§æ–¹æ¡ˆ |
| Logging | Python Logging + Structlog | Latest | ç»“æ„åŒ–æ—¥å¿— | ä¾¿äºæŸ¥è¯¢å’Œåˆ†æï¼Œæ”¯æŒJSONæ ¼å¼ |

---

## ğŸ“Š æ•°æ®æ¨¡å‹

### User

**Purpose**: è¡¨ç¤ºç³»ç»Ÿç”¨æˆ·ï¼ŒåŒ…å«è®¤è¯ä¿¡æ¯å’ŒåŸºæœ¬é…ç½®

**Key Attributes:**
- id: ObjectId - ç”¨æˆ·å”¯ä¸€æ ‡è¯†ç¬¦
- username: string - ç”¨æˆ·åï¼Œç”¨äºç™»å½•
- email: string - é‚®ç®±åœ°å€ï¼Œç”¨äºé€šçŸ¥å’Œæ‰¾å›å¯†ç 
- password_hash: string - å¯†ç å“ˆå¸Œå€¼
- created_at: DateTime - åˆ›å»ºæ—¶é—´
- updated_at: DateTime - æœ€åæ›´æ–°æ—¶é—´
- is_active: boolean - è´¦æˆ·çŠ¶æ€
- role: string - ç”¨æˆ·è§’è‰² (admin/user)

#### TypeScript Interface
```typescript
interface User {
  id: string;
  username: string;
  email: string;
  created_at: Date;
  updated_at: Date;
  is_active: boolean;
  role: 'admin' | 'user';
}
```

#### Relationships
- ä¸€å¯¹å¤š: User â†’ Agent (ä¸€ä¸ªç”¨æˆ·å¯ä»¥æ‹¥æœ‰å¤šä¸ªAgent)
- ä¸€å¯¹å¤š: User â†’ Session (ä¸€ä¸ªç”¨æˆ·å¯ä»¥æœ‰å¤šä¸ªä¼šè¯)

### Agent

**Purpose**: AI Agentå®ä½“ï¼Œå­˜å‚¨é…ç½®å’ŒçŠ¶æ€ä¿¡æ¯

**Key Attributes:**
- id: ObjectId - Agentå”¯ä¸€æ ‡è¯†ç¬¦
- user_id: ObjectId - æ‰€å±ç”¨æˆ·ID
- name: string - Agentåç§°
- description: string - Agentæè¿°
- config: object - Agenté…ç½®å‚æ•°
- status: string - è¿è¡ŒçŠ¶æ€ (idle/running/completed/error)
- created_at: DateTime - åˆ›å»ºæ—¶é—´
- updated_at: DateTime - æœ€åæ›´æ–°æ—¶é—´

#### TypeScript Interface
```typescript
interface Agent {
  id: string;
  user_id: string;
  name: string;
  description: string;
  config: {
    model: string;
    temperature: number;
    max_tokens: number;
    tools: string[];
  };
  status: 'idle' | 'running' | 'completed' | 'error';
  created_at: Date;
  updated_at: Date;
}
```

#### Relationships
- å¤šå¯¹ä¸€: Agent â†’ User (å¤šä¸ªAgentå±äºä¸€ä¸ªç”¨æˆ·)
- ä¸€å¯¹å¤š: Agent â†’ Task (ä¸€ä¸ªAgentå¯ä»¥æ‰§è¡Œå¤šä¸ªä»»åŠ¡)

### Task

**Purpose:** è¡¨ç¤ºAgentæ‰§è¡Œçš„å…·ä½“ä»»åŠ¡

**Key Attributes:**
- id: ObjectId - ä»»åŠ¡å”¯ä¸€æ ‡è¯†ç¬¦
- agent_id: ObjectId - æ‰§è¡Œä»»åŠ¡çš„Agent ID
- type: string - ä»»åŠ¡ç±»å‹ (file_operation/shell_command/browser_automation)
- input: object - ä»»åŠ¡è¾“å…¥å‚æ•°
- output: object - ä»»åŠ¡æ‰§è¡Œç»“æœ
- status: string - ä»»åŠ¡çŠ¶æ€ (pending/running/completed/failed)
- created_at: DateTime - åˆ›å»ºæ—¶é—´
- updated_at: DateTime - æœ€åæ›´æ–°æ—¶é—´

#### TypeScript Interface
```typescript
interface Task {
  id: string;
  agent_id: string;
  type: 'file_operation' | 'shell_command' | 'browser_automation' | 'web_search';
  input: Record<string, any>;
  output?: Record<string, any>;
  status: 'pending' | 'running' | 'completed' | 'failed';
  created_at: Date;
  updated_at: Date;
}
```

#### Relationships
- å¤šå¯¹ä¸€: Task â†’ Agent (å¤šä¸ªä»»åŠ¡å±äºä¸€ä¸ªAgent)
- ä¸€å¯¹ä¸€: Task â†’ Session (ä¸€ä¸ªä»»åŠ¡åœ¨ä¸€ä¸ªä¼šè¯ä¸­æ‰§è¡Œ)

### Session

**Purpose:** ç”¨æˆ·ä¼šè¯ï¼Œå…³è”æ²™ç®±å®¹å™¨

**Key Attributes:**
- id: ObjectId - ä¼šè¯å”¯ä¸€æ ‡è¯†ç¬¦
- user_id: ObjectId - ç”¨æˆ·ID
- container_id: string - Dockerå®¹å™¨ID
- status: string - ä¼šè¯çŠ¶æ€ (active/terminated)
- created_at: DateTime - åˆ›å»ºæ—¶é—´
- expires_at: DateTime - è¿‡æœŸæ—¶é—´

#### TypeScript Interface
```typescript
interface Session {
  id: string;
  user_id: string;
  container_id: string;
  status: 'active' | 'terminated';
  created_at: Date;
  expires_at: Date;
}
```

#### Relationships
- å¤šå¯¹ä¸€: Session â†’ User (å¤šä¸ªä¼šè¯å±äºä¸€ä¸ªç”¨æˆ·)
- ä¸€å¯¹å¤š: Session â†’ Task (ä¸€ä¸ªä¼šè¯åŒ…å«å¤šä¸ªä»»åŠ¡)

---

## ğŸ”Œ APIè§„èŒƒ

### REST API è§„èŒƒ

```yaml
openapi: 3.0.0
info:
  title: AI Manus API
  version: 1.0.0
  description: AI Agentç³»ç»ŸRESTful API
servers:
  - url: http://localhost:8000
    description: å¼€å‘ç¯å¢ƒ
paths:
  /api/users:
    get:
      summary: è·å–ç”¨æˆ·åˆ—è¡¨
      tags:
        - Users
      security:
        - bearerAuth: []
      responses:
        '200':
          description: æˆåŠŸè¿”å›ç”¨æˆ·åˆ—è¡¨
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
    post:
      summary: åˆ›å»ºæ–°ç”¨æˆ·
      tags:
        - Users
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                email:
                  type: string
                password:
                  type: string
      responses:
        '201':
          description: ç”¨æˆ·åˆ›å»ºæˆåŠŸ

  /api/agents:
    get:
      summary: è·å–Agentåˆ—è¡¨
      tags:
        - Agents
      security:
        - bearerAuth: []
      parameters:
        - name: user_id
          in: query
          schema:
            type: string
      responses:
        '200':
          description: æˆåŠŸè¿”å›Agentåˆ—è¡¨
    post:
      summary: åˆ›å»ºæ–°Agent
      tags:
        - Agents
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AgentInput'
      responses:
        '201':
          description: Agentåˆ›å»ºæˆåŠŸ

  /api/agents/{agent_id}:
    get:
      summary: è·å–Agentè¯¦æƒ…
      tags:
        - Agents
      security:
        - bearerAuth: []
      parameters:
        - name: agent_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: æˆåŠŸè¿”å›Agentä¿¡æ¯
    put:
      summary: æ›´æ–°Agenté…ç½®
      tags:
        - Agents
      security:
        - bearerAuth: []
      parameters:
        - name: agent_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AgentUpdate'
      responses:
        '200':
          description: Agentæ›´æ–°æˆåŠŸ
    delete:
      summary: åˆ é™¤Agent
      tags:
        - Agents
      security:
        - bearerAuth: []
      parameters:
        - name: agent_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Agentåˆ é™¤æˆåŠŸ

  /api/tasks:
    post:
      summary: åˆ›å»ºæ–°ä»»åŠ¡
      tags:
        - Tasks
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TaskInput'
      responses:
        '201':
          description: ä»»åŠ¡åˆ›å»ºæˆåŠŸ

  /api/tasks/{task_id}:
    get:
      summary: è·å–ä»»åŠ¡çŠ¶æ€
      tags:
        - Tasks
      security:
        - bearerAuth: []
      parameters:
        - name: task_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: æˆåŠŸè¿”å›ä»»åŠ¡ä¿¡æ¯

  /api/auth/login:
    post:
      summary: ç”¨æˆ·ç™»å½•
      tags:
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                password:
                  type: string
      responses:
        '200':
          description: ç™»å½•æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                  user:
                    $ref: '#/components/schemas/User'

components:
  schemas:
    User:
      type: object
      properties:
        id:
          type: string
        username:
          type: string
        email:
          type: string
        role:
          type: string
          enum: [admin, user]
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    AgentInput:
      type: object
      required:
        - name
        - config
      properties:
        name:
          type: string
        description:
          type: string
        config:
          type: object
          properties:
            model:
              type: string
            temperature:
              type: number
            max_tokens:
              type: integer
            tools:
              type: array
              items:
                type: string

    AgentUpdate:
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        config:
          $ref: '#/components/schemas/AgentInput/properties/config'

    TaskInput:
      type: object
      required:
        - agent_id
        - type
        - input
      properties:
        agent_id:
          type: string
        type:
          type: string
          enum: [file_operation, shell_command, browser_automation, web_search]
        input:
          type: object
          description: ä»»åŠ¡è¾“å…¥å‚æ•°ï¼Œæ ¹æ®ä»»åŠ¡ç±»å‹ä¸åŒ

  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
```

---

## ğŸ§© ç»„ä»¶

### User Management Service

**Responsibility:** å¤„ç†ç”¨æˆ·è®¤è¯ã€æˆæƒå’Œè´¦æˆ·ç®¡ç†

**Key Interfaces:**
- POST /api/auth/login - ç”¨æˆ·ç™»å½•
- POST /api/auth/register - ç”¨æˆ·æ³¨å†Œ
- GET /api/users/profile - è·å–ç”¨æˆ·ä¿¡æ¯
- PUT /api/users/profile - æ›´æ–°ç”¨æˆ·ä¿¡æ¯

**Dependencies:** MongoDB, Redis

**Technology Stack:** FastAPI, SQLAlchemy, bcrypt

### Agent Management Service

**Responsibility:** AI Agentçš„åˆ›å»ºã€é…ç½®ã€ç›‘æ§å’Œç®¡ç†

**Key Interfaces:**
- GET /api/agents - è·å–Agentåˆ—è¡¨
- POST /api/agents - åˆ›å»ºæ–°Agent
- GET /api/agents/{id} - è·å–Agentè¯¦æƒ…
- PUT /api/agents/{id} - æ›´æ–°Agenté…ç½®
- DELETE /api/agents/{id} - åˆ é™¤Agent

**Dependencies:** User Management Service, Task Service

**Technology Stack:** FastAPI, MongoDB, Redis, Docker SDK

### Task Execution Service

**Responsibility:** ä»»åŠ¡åˆ›å»ºã€è°ƒåº¦å’Œæ‰§è¡Œç®¡ç†

**Key Interfaces:**
- POST /api/tasks - åˆ›å»ºä»»åŠ¡
- GET /api/tasks/{id} - è·å–ä»»åŠ¡çŠ¶æ€
- POST /api/tasks/{id}/cancel - å–æ¶ˆä»»åŠ¡
- GET /api/tasks/{id}/logs - è·å–ä»»åŠ¡æ—¥å¿—

**Dependencies:** Agent Management Service, Sandbox Service

**Technology Stack:** FastAPI, Celery, Redis

### Sandbox Service

**Responsibility:** Dockerå®¹å™¨ç®¡ç†ã€æ²™ç®±ç¯å¢ƒéš”ç¦»å’Œèµ„æºç›‘æ§

**Key Interfaces:**
- POST /api/sandbox/create - åˆ›å»ºæ²™ç®±å®¹å™¨
- DELETE /api/sandbox/{id} - é”€æ¯å®¹å™¨
- GET /api/sandbox/{id}/status - è·å–å®¹å™¨çŠ¶æ€
- POST /api/sandbox/{id}/execute - åœ¨å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤

**Dependencies:** Docker Engine, Monitoring System

**Technology Stack:** FastAPI, Docker SDK, psutil

### Real-time Communication Service

**Responsibility:** SSEå’ŒWebSocketè¿æ¥ç®¡ç†ï¼Œå®æ—¶æ¶ˆæ¯æ¨é€

**Key Interfaces:**
- GET /api/events - SSEäº‹ä»¶æµ
- WS /api/ws - WebSocketè¿æ¥

**Dependencies:** Redis, Frontend Client

**Technology Stack:** FastAPI, WebSocket Server, Redis Pub/Sub

### Frontend Application

**Responsibility:** ç”¨æˆ·ç•Œé¢ã€äº¤äº’é€»è¾‘å’ŒçŠ¶æ€ç®¡ç†

**Key Interfaces:**
- Agentç®¡ç†ç•Œé¢
- ä»»åŠ¡ç›‘æ§é¢æ¿
- å®æ—¶æ—¥å¿—æŸ¥çœ‹å™¨
- VNCé›†æˆå®¢æˆ·ç«¯

**Dependencies:** Backend API Services

**Technology Stack:** Vue 3, TypeScript, Vite, Tailwind CSS, Reka UI

### VNC Integration Component

**Responsibility:** Web VNCå®¢æˆ·ç«¯ï¼Œæä¾›æ²™ç®±ç¯å¢ƒçš„å›¾å½¢ç•Œé¢è®¿é—®

**Key Interfaces:**
- WebSocket VNCè¿æ¥
- è¿œç¨‹æ¡Œé¢æ¸²æŸ“
- é”®ç›˜é¼ æ ‡äº‹ä»¶å¤„ç†

**Dependencies:** Sandbox VNC Server

**Technology Stack:** noVNC.js, WebSocket

---

## ğŸ”— å¤–éƒ¨APIs

ç›®å‰AI Manusç³»ç»Ÿä¸»è¦ä¾èµ–å†…éƒ¨æœåŠ¡ï¼Œå¤–éƒ¨APIé›†æˆè¾ƒå°‘ï¼Œä½†ä¸ºæœªæ¥æ‰©å±•é¢„ç•™äº†æ¥å£ï¼š

### OpenAI/Azure OpenAI API

- **Purpose:** LLMæ¨¡å‹è°ƒç”¨ï¼Œæä¾›AIæ¨ç†èƒ½åŠ›
- **Documentation:** https://platform.openai.com/docs/api-reference
- **Base URL(s):** https://api.openai.com/v1
- **Authentication:** Bearer Token (API Key)
- **Rate Limits:** æ ¹æ®è®¢é˜…ç±»å‹ä¸åŒ

**Key Endpoints Used:**
- `POST /chat/completions` - èŠå¤©å¯¹è¯å’Œä»»åŠ¡æ¨ç†

**Integration Notes:**
- æ”¯æŒAzure OpenAIè‡ªå®šä¹‰ç«¯ç‚¹
- å®ç°è¯·æ±‚é‡è¯•å’Œé”™è¯¯å¤„ç†
- ç›‘æ§APIä½¿ç”¨é‡å’Œæˆæœ¬

### æœç´¢å¼•æ“API

- **Purpose:** ç½‘ç»œæœç´¢åŠŸèƒ½ï¼Œæ”¯æŒä¿¡æ¯æ£€ç´¢
- **Documentation:** æ ¹æ®é€‰æ‹©çš„æœç´¢å¼•æ“è€Œå®š
- **Base URL(s):** å¯é…ç½® (Bing/Google/Baidu)
- **Authentication:** API Key
- **Rate Limits:** å„æœç´¢å¼•æ“ä¸åŒ

**Key Endpoints Used:**
- `GET /search` - æ‰§è¡Œæœç´¢æŸ¥è¯¢

**Integration Notes:**
- æ”¯æŒå¤šæœç´¢å¼•æ“åˆ‡æ¢
- ç»“æœæ ¼å¼æ ‡å‡†åŒ–
- æœç´¢å†å²è®°å½•

### äº‘å­˜å‚¨API (æœªæ¥)

- **Purpose:** å¤§æ–‡ä»¶å­˜å‚¨å’Œå¤‡ä»½
- **Authentication:** OAuth 2.0
- **Integration Notes:** ä¸ºå°†æ¥çš„äº‘å­˜å‚¨é›†æˆé¢„ç•™

---

## ğŸ”„ æ ¸å¿ƒå·¥ä½œæµ

### ç”¨æˆ·ç™»å½•å’ŒAgentåˆ›å»ºæµç¨‹

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant F as Frontend
    participant A as Auth Service
    participant DB as MongoDB
    participant AM as Agent Mgmt

    U->>F: è¾“å…¥ç™»å½•ä¿¡æ¯
    F->>A: POST /api/auth/login
    A->>DB: éªŒè¯ç”¨æˆ·å‡­æ®
    DB-->>A: è¿”å›ç”¨æˆ·ä¿¡æ¯
    A-->>F: è¿”å›JWT token
    F->>F: ä¿å­˜tokenåˆ°localStorage
    F->>AM: GET /api/agents (å¸¦token)
    AM->>DB: æŸ¥è¯¢ç”¨æˆ·Agentåˆ—è¡¨
    DB-->>AM: è¿”å›Agentåˆ—è¡¨
    AM-->>F: è¿”å›Agentæ•°æ®
    F-->>U: æ˜¾ç¤ºAgentç®¡ç†ç•Œé¢
```

### ä»»åŠ¡æ‰§è¡Œå’Œç›‘æ§æµç¨‹

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant F as Frontend
    participant TE as Task Execution
    participant SB as Sandbox
    participant D as Docker
    participant SSE as SSE Stream

    U->>F: åˆ›å»ºä»»åŠ¡
    F->>TE: POST /api/tasks
    TE->>SB: è¯·æ±‚åˆ›å»ºå®¹å™¨
    SB->>D: åˆ›å»ºDockerå®¹å™¨
    D-->>SB: è¿”å›å®¹å™¨ID
    SB-->>TE: ç¡®è®¤å®¹å™¨å°±ç»ª
    TE->>SB: æ‰§è¡Œä»»åŠ¡å‘½ä»¤
    SB->>D: åœ¨å®¹å™¨ä¸­æ‰§è¡Œ
    D-->>SB: è¿”å›æ‰§è¡Œç»“æœ
    SB-->>TE: ä»»åŠ¡æ‰§è¡Œå›è°ƒ
    TE->>SSE: æ¨é€çŠ¶æ€æ›´æ–°
    SSE-->>F: å®æ—¶çŠ¶æ€æ¨é€
    F-->>U: æ˜¾ç¤ºä»»åŠ¡è¿›åº¦
```

### å®æ—¶é€šä¿¡å’ŒçŠ¶æ€åŒæ­¥

```mermaid
sequenceDiagram
    participant F as Frontend
    participant WS as WebSocket
    participant BE as Backend
    participant R as Redis
    participant SB as Sandbox

    F->>WS: å»ºç«‹WebSocketè¿æ¥
    WS->>BE: è¿æ¥è®¤è¯
    BE->>R: è®¢é˜…çŠ¶æ€æ›´æ–°
    SB->>R: å‘å¸ƒçŠ¶æ€å˜æ›´
    R->>BE: æ¨é€çŠ¶æ€æ¶ˆæ¯
    BE->>WS: è½¬å‘çŠ¶æ€æ›´æ–°
    WS-->>F: å®æ—¶çŠ¶æ€æ¨é€
```

---

## ğŸ—„ï¸ æ•°æ®åº“æ¶æ„

### MongoDB é›†åˆè®¾è®¡

```javascript
// users é›†åˆ
{
  _id: ObjectId("..."),
  username: "alex_researcher",
  email: "alex@example.com",
  password_hash: "$2b$12$...",
  role: "user",
  is_active: true,
  created_at: ISODate("2025-11-04T10:00:00Z"),
  updated_at: ISODate("2025-11-04T10:00:00Z")
}

// agents é›†åˆ
{
  _id: ObjectId("..."),
  user_id: ObjectId("..."),
  name: "Research Assistant",
  description: "AIåŠ©æ‰‹ç”¨äºç ”ç©¶ä»»åŠ¡",
  config: {
    model: "gpt-4",
    temperature: 0.7,
    max_tokens: 2048,
    tools: ["file_operations", "web_search", "browser_automation"]
  },
  status: "idle",
  created_at: ISODate("2025-11-04T10:00:00Z"),
  updated_at: ISODate("2025-11-04T10:00:00Z")
}

// tasks é›†åˆ
{
  _id: ObjectId("..."),
  agent_id: ObjectId("..."),
  user_id: ObjectId("..."),
  session_id: ObjectId("..."),
  type: "file_operation",
  input: {
    operation: "read_file",
    path: "/workspace/data.txt"
  },
  output: {
    content: "æ–‡ä»¶å†…å®¹",
    success: true
  },
  status: "completed",
  created_at: ISODate("2025-11-04T10:00:00Z"),
  updated_at: ISODate("2025-11-04T10:00:00Z")
}

// sessions é›†åˆ
{
  _id: ObjectId("..."),
  user_id: ObjectId("..."),
  container_id: "container_abc123",
  status: "active",
  vnc_port: 5900,
  created_at: ISODate("2025-11-04T10:00:00Z"),
  expires_at: ISODate("2025-11-04T11:00:00Z")
}

// ç´¢å¼•è®¾è®¡
db.users.createIndex({ "username": 1 }, { unique: true })
db.users.createIndex({ "email": 1 }, { unique: true })
db.agents.createIndex({ "user_id": 1 })
db.tasks.createIndex({ "agent_id": 1 })
db.tasks.createIndex({ "status": 1 })
db.tasks.createIndex({ "created_at": 1 })
db.sessions.createIndex({ "user_id": 1 })
db.sessions.createIndex({ "expires_at": 1 })
```

### Redis æ•°æ®ç»“æ„è®¾è®¡

```redis
# ç”¨æˆ·ä¼šè¯ç¼“å­˜
session:user_123:token_456 -> {
  "user_id": "123",
  "role": "user",
  "expires": "2025-11-04T12:00:00Z"
}
TTL: 7200

# ä»»åŠ¡çŠ¶æ€ç¼“å­˜ (å®æ—¶æ›´æ–°)
task:789:status -> "running"
task:789:progress -> "45"
task:789:logs -> "Starting task...\nExecuting..."

# å®æ—¶äº‹ä»¶é˜Ÿåˆ—
events:subscribe:agent_123 -> LIST [
  {
    "type": "task_started",
    "data": {"task_id": "789"},
    "timestamp": "2025-11-04T10:30:00Z"
  }
]

# å®¹å™¨çŠ¶æ€ç¼“å­˜
container:container_abc -> {
  "status": "running",
  "cpu_usage": "15%",
  "memory_usage": "512MB",
  "last_heartbeat": "2025-11-04T10:30:00Z"
}
```

---

## ğŸ¨ å‰ç«¯æ¶æ„

### ç»„ä»¶æ¶æ„

#### ç»„ä»¶ç»„ç»‡
```
src/
â”œâ”€â”€ components/           # é€šç”¨UIç»„ä»¶
â”‚   â”œâ”€â”€ common/          # åŸºç¡€ç»„ä»¶ (Button, Input, Modal)
â”‚   â”œâ”€â”€ forms/           # è¡¨å•ç»„ä»¶
â”‚   â””â”€â”€ layout/          # å¸ƒå±€ç»„ä»¶ (Header, Sidebar)
â”œâ”€â”€ views/               # é¡µé¢ç»„ä»¶ (è·¯ç”±ç»„ä»¶)
â”‚   â”œâ”€â”€ Dashboard/       # ä»ªè¡¨æ¿é¡µé¢
â”‚   â”œâ”€â”€ Agents/          # Agentç®¡ç†é¡µé¢
â”‚   â”œâ”€â”€ Tasks/           # ä»»åŠ¡ç®¡ç†é¡µé¢
â”‚   â””â”€â”€ Settings/        # è®¾ç½®é¡µé¢
â”œâ”€â”€ composables/         # Composition APIé€»è¾‘
â”‚   â”œâ”€â”€ useAuth.ts       # è®¤è¯é€»è¾‘
â”‚   â”œâ”€â”€ useAgents.ts     # Agentç®¡ç†é€»è¾‘
â”‚   â”œâ”€â”€ useTasks.ts      # ä»»åŠ¡ç®¡ç†é€»è¾‘
â”‚   â””â”€â”€ useWebSocket.ts  # WebSocketè¿æ¥é€»è¾‘
â”œâ”€â”€ stores/              # çŠ¶æ€ç®¡ç† (Pinia)
â”‚   â”œâ”€â”€ auth.ts          # è®¤è¯çŠ¶æ€
â”‚   â”œâ”€â”€ agents.ts        # AgentçŠ¶æ€
â”‚   â””â”€â”€ tasks.ts         # ä»»åŠ¡çŠ¶æ€
â”œâ”€â”€ services/            # APIæœåŠ¡å±‚
â”‚   â”œâ”€â”€ api.ts           # APIå®¢æˆ·ç«¯é…ç½®
â”‚   â”œâ”€â”€ auth.ts          # è®¤è¯API
â”‚   â”œâ”€â”€ agents.ts        # Agent API
â”‚   â””â”€â”€ tasks.ts         # ä»»åŠ¡API
â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”œâ”€â”€ types/               # TypeScriptç±»å‹å®šä¹‰
â””â”€â”€ styles/              # æ ·å¼æ–‡ä»¶
```

#### ç»„ä»¶æ¨¡æ¿
```vue
<template>
  <div class="agent-card">
    <h3>{{ agent.name }}</h3>
    <p>{{ agent.description }}</p>
    <div class="agent-status" :class="statusClass">
      {{ agent.status }}
    </div>
  </div>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import type { Agent } from '@/types/agent'

interface Props {
  agent: Agent
}

const props = defineProps<Props>()

const statusClass = computed(() => {
  return `status-${props.agent.status}`
})
</script>

<style scoped>
.agent-card {
  @apply p-4 border rounded-lg shadow-sm;
}
.status-idle {
  @apply text-gray-500;
}
.status-running {
  @apply text-blue-500;
}
</style>
```

### çŠ¶æ€ç®¡ç†æ¶æ„

#### çŠ¶æ€ç»“æ„
```typescript
// stores/auth.ts
export const useAuthStore = defineStore('auth', {
  state: () => ({
    user: null as User | null,
    token: null as string | null,
    isAuthenticated: false
  }),

  actions: {
    async login(credentials: LoginCredentials) {
      const response = await authService.login(credentials)
      this.user = response.user
      this.token = response.token
      this.isAuthenticated = true
    },

    logout() {
      this.user = null
      this.token = null
      this.isAuthenticated = false
    }
  }
})

// stores/agents.ts
export const useAgentsStore = defineStore('agents', {
  state: () => ({
    agents: [] as Agent[],
    currentAgent: null as Agent | null,
    loading: false
  }),

  actions: {
    async fetchAgents() {
      this.loading = true
      try {
        this.agents = await agentService.getAgents()
      } finally {
        this.loading = false
      }
    },

    async createAgent(agentData: CreateAgentDto) {
      const agent = await agentService.createAgent(agentData)
      this.agents.push(agent)
      return agent
    }
  }
})
```

#### çŠ¶æ€ç®¡ç†æ¨¡å¼
- ä½¿ç”¨Piniaè¿›è¡ŒçŠ¶æ€ç®¡ç†
- æ¯ä¸ªåŠŸèƒ½åŸŸç‹¬ç«‹çš„store
- ç»„åˆå¼APIé£æ ¼çš„çŠ¶æ€é€»è¾‘
- å“åº”å¼çŠ¶æ€æ›´æ–°å’ŒæŒä¹…åŒ–

### è·¯ç”±æ¶æ„

#### è·¯ç”±ç»„ç»‡
```typescript
// router/index.ts
import { createRouter, createWebHistory } from 'vue-router'
import { useAuthStore } from '@/stores/auth'

const routes = [
  {
    path: '/',
    name: 'Dashboard',
    component: () => import('@/views/Dashboard.vue'),
    meta: { requiresAuth: true }
  },
  {
    path: '/agents',
    name: 'Agents',
    component: () => import('@/views/Agents/List.vue'),
    meta: { requiresAuth: true }
  },
  {
    path: '/agents/:id',
    name: 'AgentDetail',
    component: () => import('@/views/Agents/Detail.vue'),
    meta: { requiresAuth: true }
  },
  {
    path: '/tasks',
    name: 'Tasks',
    component: () => import('@/views/Tasks/List.vue'),
    meta: { requiresAuth: true }
  },
  {
    path: '/login',
    name: 'Login',
    component: () => import('@/views/Login.vue'),
    meta: { guest: true }
  }
]

const router = createRouter({
  history: createWebHistory(),
  routes
})

// è·¯ç”±å®ˆå«
router.beforeEach((to, from, next) => {
  const authStore = useAuthStore()

  if (to.meta.requiresAuth && !authStore.isAuthenticated) {
    next('/login')
  } else if (to.meta.guest && authStore.isAuthenticated) {
    next('/')
  } else {
    next()
  }
})
```

#### Protected Route Pattern
```vue
<!-- views/Agents/Detail.vue -->
<template>
  <div class="agent-detail">
    <div v-if="loading">åŠ è½½ä¸­...</div>
    <div v-else-if="agent">
      <AgentForm :agent="agent" @update="updateAgent" />
      <TaskList :agent-id="agent.id" />
      <VNCViewer v-if="agent.status === 'running'" :agent-id="agent.id" />
    </div>
    <div v-else>Agentä¸å­˜åœ¨</div>
  </div>
</template>

<script setup lang="ts">
import { useRoute } from 'vue-router'
import { useAgentsStore } from '@/stores/agents'
import { useAuthStore } from '@/stores/auth'

const route = useRoute()
const authStore = useAuthStore()
const agentsStore = useAgentsStore()

// è·¯ç”±å‚æ•°ç±»å‹å®‰å…¨
const agentId = route.params.id as string

const agent = computed(() =>
  agentsStore.agents.find(a => a.id === agentId)
)

onMounted(async () => {
  if (!authStore.isAuthenticated) {
    return
  }
  await agentsStore.fetchAgents()
})
</script>
```

### Frontend Services Layer

#### API Client Setup
```typescript
// services/api.ts
import axios, { AxiosInstance } from 'axios'
import { useAuthStore } from '@/stores/auth'
import { ElMessage } from 'element-plus'

class ApiClient {
  private instance: AxiosInstance

  constructor() {
    this.instance = axios.create({
      baseURL: import.meta.env.VITE_API_BASE_URL || 'http://localhost:8000',
      timeout: 10000
    })

    this.setupInterceptors()
  }

  private setupInterceptors() {
    // è¯·æ±‚æ‹¦æˆªå™¨ - æ·»åŠ è®¤è¯å¤´
    this.instance.interceptors.request.use(
      (config) => {
        const authStore = useAuthStore()
        if (authStore.token) {
          config.headers.Authorization = `Bearer ${authStore.token}`
        }
        return config
      },
      (error) => Promise.reject(error)
    )

    // å“åº”æ‹¦æˆªå™¨ - ç»Ÿä¸€é”™è¯¯å¤„ç†
    this.instance.interceptors.response.use(
      (response) => response,
      (error) => {
        if (error.response?.status === 401) {
          const authStore = useAuthStore()
          authStore.logout()
          window.location.href = '/login'
        }

        const message = error.response?.data?.message || 'è¯·æ±‚å¤±è´¥'
        ElMessage.error(message)

        return Promise.reject(error)
      }
    )
  }

  async get<T>(url: string, params?: any): Promise<T> {
    const response = await this.instance.get(url, { params })
    return response.data
  }

  async post<T>(url: string, data?: any): Promise<T> {
    const response = await this.instance.post(url, data)
    return response.data
  }

  async put<T>(url: string, data?: any): Promise<T> {
    const response = await this.instance.put(url, data)
    return response.data
  }

  async delete<T>(url: string): Promise<T> {
    const response = await this.instance.delete(url)
    return response.data
  }
}

export const apiClient = new ApiClient()
```

#### Service Example
```typescript
// services/agents.ts
import { apiClient } from './api'
import type { Agent, CreateAgentDto, UpdateAgentDto } from '@/types/agent'

export const agentService = {
  async getAgents(): Promise<Agent[]> {
    return apiClient.get<Agent[]>('/api/agents')
  },

  async getAgent(id: string): Promise<Agent> {
    return apiClient.get<Agent>(`/api/agents/${id}`)
  },

  async createAgent(data: CreateAgentDto): Promise<Agent> {
    return apiClient.post<Agent>('/api/agents', data)
  },

  async updateAgent(id: string, data: UpdateAgentDto): Promise<Agent> {
    return apiClient.put<Agent>(`/api/agents/${id}`, data)
  },

  async deleteAgent(id: string): Promise<void> {
    return apiClient.delete<void>(`/api/agents/${id}`)
  }
}
```

---

## âš™ï¸ åç«¯æ¶æ„

### Service Architecture

#### Controller/Route Organization
```
backend/app/
â”œâ”€â”€ interfaces/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.py          # è®¤è¯è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ users.py         # ç”¨æˆ·ç®¡ç†è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ agents.py        # Agentç®¡ç†è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ tasks.py         # ä»»åŠ¡ç®¡ç†è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ sandbox.py       # æ²™ç®±ç®¡ç†è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ websocket.py     # WebSocketè·¯ç”±
â”‚   â”‚   â””â”€â”€ dependencies.py      # APIä¾èµ–æ³¨å…¥
â”‚   â””â”€â”€ websocket/
â”‚       â”œâ”€â”€ handlers.py          # WebSocketæ¶ˆæ¯å¤„ç†
â”‚       â””â”€â”€ manager.py           # è¿æ¥ç®¡ç†
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ auth_service.py      # è®¤è¯ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ agent_service.py     # Agentä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ task_service.py      # ä»»åŠ¡ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â””â”€â”€ sandbox_service.py   # æ²™ç®±ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ user.py              # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ agent.py             # Agentæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ task.py              # ä»»åŠ¡æ¨¡å‹
â”‚   â”‚   â””â”€â”€ session.py           # ä¼šè¯æ¨¡å‹
â”‚   â””â”€â”€ repositories/
â”‚       â”œâ”€â”€ user_repository.py   # ç”¨æˆ·æ•°æ®è®¿é—®
â”‚       â”œâ”€â”€ agent_repository.py  # Agentæ•°æ®è®¿é—®
â”‚       â””â”€â”€ task_repository.py   # ä»»åŠ¡æ•°æ®è®¿é—®
â””â”€â”€ infrastructure/
    â”œâ”€â”€ mongodb/
    â”‚   â”œâ”€â”€ database.py          # MongoDBè¿æ¥
    â”‚   â””â”€â”€ repositories/        # MongoDBä»“å‚¨å®ç°
    â”œâ”€â”€ redis/
    â”‚   â”œâ”€â”€ cache.py             # Redisç¼“å­˜
    â”‚   â””â”€â”€ pubsub.py            # Rediså‘å¸ƒè®¢é˜…
    â”œâ”€â”€ external/
    â”‚   â”œâ”€â”€ docker_client.py     # Dockeré›†æˆ
    â”‚   â”œâ”€â”€ llm_client.py        # LLM APIé›†æˆ
    â”‚   â””â”€â”€ vnc_client.py        # VNCé›†æˆ
    â””â”€â”€ security/
        â”œâ”€â”€ auth.py              # è®¤è¯å®ç°
        â””â”€â”€ permissions.py       # æƒé™æ§åˆ¶
```

#### Controller Template
```python
# interfaces/api/routes/agents.py
from fastapi import APIRouter, Depends, HTTPException
from typing import List
from interfaces.api.dependencies import get_current_user, get_agent_service
from domain.models.user import User
from domain.models.agent import Agent
from domain.services.agent_service import AgentService
from interfaces.schemas.agent import AgentCreate, AgentUpdate, AgentResponse

router = APIRouter(prefix="/api/agents", tags=["agents"])

@router.get("/", response_model=List[AgentResponse])
async def get_agents(
    current_user: User = Depends(get_current_user),
    agent_service: AgentService = Depends(get_agent_service)
) -> List[Agent]:
    """è·å–å½“å‰ç”¨æˆ·çš„Agentåˆ—è¡¨"""
    return await agent_service.get_user_agents(current_user.id)

@router.post("/", response_model=AgentResponse)
async def create_agent(
    agent_data: AgentCreate,
    current_user: User = Depends(get_current_user),
    agent_service: AgentService = Depends(get_agent_service)
) -> Agent:
    """åˆ›å»ºæ–°Agent"""
    return await agent_service.create_agent(current_user.id, agent_data.dict())

@router.get("/{agent_id}", response_model=AgentResponse)
async def get_agent(
    agent_id: str,
    current_user: User = Depends(get_current_user),
    agent_service: AgentService = Depends(get_agent_service)
) -> Agent:
    """è·å–Agentè¯¦æƒ…"""
    agent = await agent_service.get_agent(agent_id)
    if not agent or agent.user_id != current_user.id:
        raise HTTPException(status_code=404, detail="Agentä¸å­˜åœ¨")
    return agent
```

### Database Architecture

#### Schema Design
```python
# domain/models/user.py
from datetime import datetime
from typing import Optional
from pydantic import BaseModel, EmailStr
from beanie import Document, Indexed

class User(Document):
    username: Indexed(str, unique=True)
    email: Indexed(EmailStr, unique=True)
    password_hash: str
    role: str = "user"  # "admin", "user"
    is_active: bool = True
    created_at: datetime = datetime.utcnow()
    updated_at: datetime = datetime.utcnow()

    class Settings:
        name = "users"
        indexes = [
            "username",
            "email",
            "created_at",
        ]

# domain/models/agent.py
from datetime import datetime
from typing import List, Optional
from pydantic import BaseModel
from beanie import Document, Indexed, Link

class AgentConfig(BaseModel):
    model: str = "gpt-3.5-turbo"
    temperature: float = 0.7
    max_tokens: int = 2048
    tools: List[str] = []

class Agent(Document):
    user_id: Link[User]
    name: str
    description: Optional[str] = None
    config: AgentConfig
    status: str = "idle"  # "idle", "running", "completed", "error"
    created_at: datetime = datetime.utcnow()
    updated_at: datetime = datetime.utcnow()

    class Settings:
        name = "agents"
        indexes = [
            "user_id",
            "status",
            "created_at",
        ]
```

#### Data Access Layer
```python
# domain/repositories/agent_repository.py
from typing import List, Optional
from beanie import PydanticObjectId
from domain.models.agent import Agent

class AgentRepository:
    async def create(self, agent: Agent) -> Agent:
        return await agent.insert()

    async def get_by_id(self, agent_id: PydanticObjectId) -> Optional[Agent]:
        return await Agent.get(agent_id)

    async def get_user_agents(self, user_id: str) -> List[Agent]:
        return await Agent.find(Agent.user_id.id == user_id).to_list()

    async def update(self, agent_id: str, update_data: dict) -> Optional[Agent]:
        agent = await Agent.get(agent_id)
        if agent:
            for key, value in update_data.items():
                setattr(agent, key, value)
            await agent.save()
        return agent

    async def delete(self, agent_id: str) -> bool:
        agent = await Agent.get(agent_id)
        if agent:
            await agent.delete()
            return True
        return False
```

### Authentication and Authorization

#### Auth Flow
```mermaid
sequenceDiagram
    participant C as Client
    participant A as Auth Middleware
    participant T as Token Service
    participant R as Redis
    participant D as Database

    C->>A: Request + Authorization: Bearer token
    A->>T: Validate token
    T->>R: Check cached token
    alt Token in cache
        R-->>T: Valid token data
    else Token not in cache
        T->>D: Verify token signature
        D-->>T: Token valid
        T->>R: Cache token
    end
    T-->>A: User data
    A-->>A: Inject current_user
    A-->>C: Continue to handler
```

#### Middleware/Guards
```python
# infrastructure/security/auth.py
from fastapi import HTTPException, Depends, status
from fastapi.security import HTTPBearer, HTTPAuthorizationCredentials
from jose import JWTError, jwt
from infrastructure.redis.cache import RedisClient
from domain.models.user import User
from interfaces.api.dependencies import get_user_repository

security = HTTPBearer()

class AuthService:
    def __init__(self):
        self.redis = RedisClient()
        self.secret_key = "your-secret-key"
        self.algorithm = "HS256"

    async def verify_token(self, credentials: HTTPAuthorizationCredentials) -> User:
        # ä»Redisç¼“å­˜è·å–tokenæ•°æ®
        cache_key = f"token:{credentials.credentials}"
        cached_user = await self.redis.get(cache_key)

        if cached_user:
            return User.parse_obj(cached_user)

        # è§£ç JWT token
        try:
            payload = jwt.decode(credentials.credentials, self.secret_key, algorithms=[self.algorithm])
            user_id = payload.get("sub")

            if not user_id:
                raise HTTPException(status_code=401, detail="Invalid token")

            user_repo = await get_user_repository()
            user = await user_repo.get_by_id(user_id)

            if not user:
                raise HTTPException(status_code=401, detail="User not found")

            # ç¼“å­˜ç”¨æˆ·æ•°æ®ï¼Œæœ‰æ•ˆæœŸ2å°æ—¶
            await self.redis.setex(cache_key, 7200, user.dict())

            return user

        except JWTError:
            raise HTTPException(status_code=401, detail="Invalid token")

async def get_current_user(
    credentials: HTTPAuthorizationCredentials = Depends(security),
    auth_service: AuthService = Depends(AuthService)
) -> User:
    """è·å–å½“å‰è®¤è¯ç”¨æˆ·"""
    return await auth_service.verify_token(credentials)

async def require_admin(current_user: User = Depends(get_current_user)) -> User:
    """è¦æ±‚ç®¡ç†å‘˜æƒé™"""
    if current_user.role != "admin":
        raise HTTPException(
            status_code=status.HTTP_403_FORBIDDEN,
            detail="Admin permissions required"
        )
    return current_user
```

---

## ğŸ“ ç»Ÿä¸€é¡¹ç›®ç»“æ„

```plaintext
ai-manus/
â”œâ”€â”€ .github/                    # CI/CD workflows
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ ci.yaml
â”‚       â””â”€â”€ deploy.yaml
â”œâ”€â”€ frontend/                   # Frontend application
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/         # UI components
â”‚   â”‚   â”‚   â”œâ”€â”€ common/         # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ forms/          # è¡¨å•ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ layout/         # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ views/              # Page components/routes
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard/      # ä»ªè¡¨æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ Agents/         # Agentç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ Tasks/          # ä»»åŠ¡ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ Settings/       # è®¾ç½®é¡µé¢
â”‚   â”‚   â”œâ”€â”€ composables/        # Custom React hooks
â”‚   â”‚   â”œâ”€â”€ services/           # API client services
â”‚   â”‚   â”œâ”€â”€ stores/             # State management
â”‚   â”‚   â”œâ”€â”€ utils/              # Frontend utilities
â”‚   â”‚   â””â”€â”€ styles/             # Global styles/themes
â”‚   â”œâ”€â”€ public/                 # Static assets
â”‚   â”œâ”€â”€ tests/                  # Frontend tests
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts
â”œâ”€â”€ backend/                    # Backend application
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ interfaces/         # API interfaces
â”‚   â”‚   â”‚   â”œâ”€â”€ api/            # REST API routes
â”‚   â”‚   â”‚   â””â”€â”€ websocket/      # WebSocket handlers
â”‚   â”‚   â”œâ”€â”€ domain/             # Business logic
â”‚   â”‚   â”‚   â”œâ”€â”€ services/       # Domain services
â”‚   â”‚   â”‚   â”œâ”€â”€ models/         # Data models
â”‚   â”‚   â”‚   â””â”€â”€ repositories/   # Repository pattern
â”‚   â”‚   â””â”€â”€ infrastructure/     # External integrations
â”‚   â”‚       â”œâ”€â”€ mongodb/        # MongoDB
â”‚   â”‚       â”œâ”€â”€ redis/          # Redis
â”‚   â”‚       â”œâ”€â”€ docker/         # Docker integration
â”‚   â”‚       â””â”€â”€ llm/            # LLM APIs
â”‚   â”œâ”€â”€ tests/                  # Backend tests
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ main.py
â”œâ”€â”€ sandbox/                    # Sandbox environment
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â””â”€â”€ api/                # Sandbox API endpoints
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ mockserver/                 # Mock server for development
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â””â”€â”€ api/                # Mock API endpoints
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ docs/                       # Documentation
â”‚   â”œâ”€â”€ prd.md                  # Product requirements
â”‚   â”œâ”€â”€ architecture.md         # This document
â”‚   â””â”€â”€ api.md                  # API documentation
â”œâ”€â”€ scripts/                    # Build/deploy scripts
â”‚   â”œâ”€â”€ build.sh
â”‚   â”œâ”€â”€ deploy.sh
â”‚   â””â”€â”€ setup-dev.sh
â”œâ”€â”€ docker-compose.yml          # Development environment
â”œâ”€â”€ docker-compose.prod.yml     # Production environment
â”œâ”€â”€ .env.example                # Environment template
â””â”€â”€ README.md
```

---

## ğŸ› ï¸ å¼€å‘å·¥ä½œæµ

### æœ¬åœ°å¼€å‘è®¾ç½®

#### Prerequisites
```bash
# å®‰è£… Docker å’Œ Docker Compose
curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh

# å®‰è£… Node.js 18+
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# å®‰è£… Python 3.10+
sudo apt update
sudo apt install python3.10 python3.10-venv python3.10-dev

# å…‹éš†é¡¹ç›®
git clone https://github.com/your-org/ai-manus.git
cd ai-manus
```

#### Initial Setup
```bash
# å¤åˆ¶ç¯å¢ƒé…ç½®
cp .env.example .env

# å¯åŠ¨å¼€å‘ç¯å¢ƒ
docker compose up -d

# å®‰è£…å‰ç«¯ä¾èµ–
cd frontend
npm install

# å®‰è£…åç«¯ä¾èµ–
cd ../backend
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# åˆå§‹åŒ–æ•°æ®åº“
python -m app.init_db

# è¿”å›æ ¹ç›®å½•
cd ..
```

#### Development Commands
```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker compose up -d

# å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
cd frontend && npm run dev

# å¯åŠ¨åç«¯å¼€å‘æœåŠ¡å™¨
cd backend && python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

# è¿è¡Œæµ‹è¯•
npm run test                    # Frontend tests
cd backend && python -m pytest # Backend tests

# æŸ¥çœ‹æ—¥å¿—
docker compose logs -f
```

### ç¯å¢ƒé…ç½®

#### Required Environment Variables
```bash
# Frontend (.env.local)
VITE_API_BASE_URL=http://localhost:8000
VITE_WS_URL=ws://localhost:8000
VITE_VNC_URL=ws://localhost:5900

# Backend (.env)
API_BASE=http://localhost:8000
MONGODB_URL=mongodb://localhost:27017/ai_manus
REDIS_URL=redis://localhost:6379/0
SECRET_KEY=your-secret-key-here
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# LLM Configuration
OPENAI_API_KEY=your-openai-api-key
OPENAI_BASE_URL=https://api.openai.com/v1
MODEL_NAME=gpt-3.5-turbo

# Docker Configuration
DOCKER_HOST=unix:///var/run/docker.sock
SANDBOX_NETWORK=ai-manus-sandbox
VNC_PASSWORD=vnc123

# Shared
ENVIRONMENT=development
DEBUG=true
```

---

## ğŸš€ éƒ¨ç½²æ¶æ„

### éƒ¨ç½²ç­–ç•¥

**Frontend Deployment:**
- **Platform:** Vercel/Netlify æˆ–è‡ªæ‰˜ç®¡ Nginx
- **Build Command:** `npm run build`
- **Output Directory:** `dist`
- **CDN/Edge:** Cloudflare CDN (å¯é€‰)

**Backend Deployment:**
- **Platform:** äº‘æœåŠ¡å™¨ (AWS EC2, é˜¿é‡Œäº‘ECS)
- **Build Command:** `pip install -r requirements.txt`
- **Deployment Method:** Docker Compose + Systemd

### CI/CD Pipeline
```yaml
# .github/workflows/ci.yml
name: CI/CD Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  test-frontend:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
      - run: cd frontend && npm ci
      - run: cd frontend && npm run test
      - run: cd frontend && npm run build

  test-backend:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-python@v4
        with:
          python-version: '3.10'
      - run: cd backend && pip install -r requirements.txt
      - run: cd backend && python -m pytest
      - run: cd backend && python -m mypy app

  deploy:
    needs: [test-frontend, test-backend]
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    steps:
      - uses: actions/checkout@v3
      - name: Deploy to production
        run: |
          # éƒ¨ç½²è„šæœ¬
          echo "Deploying to production..."
```

### Environments
| ç¯å¢ƒ | Frontend URL | Backend URL | Purpose |
|------|-------------|-------------|---------|
| Development | http://localhost:5173 | http://localhost:8000 | æœ¬åœ°å¼€å‘ |
| Staging | https://staging.ai-manus.com | https://api-staging.ai-manus.com | é¢„å‘å¸ƒæµ‹è¯• |
| Production | https://ai-manus.com | https://api.ai-manus.com | ç”Ÿäº§ç¯å¢ƒ |

---

## ğŸ›¡ï¸ å®‰å…¨å’Œæ€§èƒ½

### å®‰å…¨è¦æ±‚

**Frontend Security:**
- CSP Headers: `default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; connect-src 'self' ws: wss:`
- XSS Prevention: å†…å®¹å®‰å…¨ç­–ç•¥ï¼Œè¾“å…¥éªŒè¯å’Œè¾“å‡ºç¼–ç 
- Secure Storage: æ•æ„Ÿæ•°æ®å­˜å‚¨åœ¨HttpOnly cookiesä¸­ï¼Œé¿å…localStorageå­˜å‚¨æ•æ„Ÿä¿¡æ¯

**Backend Security:**
- Input Validation: Pydanticæ¨¡å‹éªŒè¯æ‰€æœ‰è¾“å…¥
- Rate Limiting: åŸºäºç”¨æˆ·å’ŒIPçš„è¯·æ±‚é¢‘ç‡é™åˆ¶
- CORS Policy: ä¸¥æ ¼çš„è·¨åŸŸèµ„æºå…±äº«é…ç½®

**Authentication Security:**
- Token Storage: JWTå­˜å‚¨åœ¨HttpOnly cookiesä¸­
- Session Management: Redisä¼šè¯ç®¡ç†ï¼Œè‡ªåŠ¨è¿‡æœŸ
- Password Policy: bcryptå“ˆå¸Œï¼Œç›å€¼åŠ å¯†ï¼Œæœ€å°é•¿åº¦8ä½

### æ€§èƒ½ä¼˜åŒ–

**Frontend Performance:**
- Bundle Size Target: < 1MB (gzipped)
- Loading Strategy: ä»£ç åˆ†å‰²ï¼Œæ‡’åŠ è½½ï¼Œé¢„åŠ è½½å…³é”®èµ„æº
- Caching Strategy: Service Worker cachingï¼ŒHTTPç¼“å­˜å¤´ä¼˜åŒ–

**Backend Performance:**
- Response Time Target: < 500ms (95th percentile)
- Database Optimization: MongoDBç´¢å¼•ä¼˜åŒ–ï¼ŒæŸ¥è¯¢ä¼˜åŒ–
- Caching Strategy: Redisç¼“å­˜çƒ­ç‚¹æ•°æ®ï¼Œæ•°æ®åº“æŸ¥è¯¢ç»“æœç¼“å­˜

---

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### Testing Pyramid

```
    E2E Tests
    /        \
  Integration Tests
  /            \
Frontend Unit  Backend Unit
```

### Test Organization

#### Frontend Tests
```
frontend/tests/
â”œâ”€â”€ unit/                   # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ components/         # ç»„ä»¶æµ‹è¯•
â”‚   â”œâ”€â”€ composables/        # ç»„åˆå¼å‡½æ•°æµ‹è¯•
â”‚   â””â”€â”€ utils/              # å·¥å…·å‡½æ•°æµ‹è¯•
â”œâ”€â”€ integration/            # é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ api/                # APIé›†æˆæµ‹è¯•
â”‚   â””â”€â”€ stores/             # çŠ¶æ€ç®¡ç†æµ‹è¯•
â””â”€â”€ e2e/                    # ç«¯åˆ°ç«¯æµ‹è¯•
    â”œâ”€â”€ auth.spec.ts        # è®¤è¯æµç¨‹æµ‹è¯•
    â”œâ”€â”€ agents.spec.ts      # Agentç®¡ç†æµ‹è¯•
    â””â”€â”€ tasks.spec.ts       # ä»»åŠ¡æ‰§è¡Œæµ‹è¯•
```

#### Backend Tests
```
backend/tests/
â”œâ”€â”€ unit/                   # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ services/           # ä¸šåŠ¡é€»è¾‘æµ‹è¯•
â”‚   â”œâ”€â”€ repositories/       # æ•°æ®è®¿é—®æµ‹è¯•
â”‚   â””â”€â”€ utils/              # å·¥å…·å‡½æ•°æµ‹è¯•
â”œâ”€â”€ integration/            # é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ api/                # APIç«¯ç‚¹æµ‹è¯•
â”‚   â”œâ”€â”€ database/           # æ•°æ®åº“é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ external/           # å¤–éƒ¨æœåŠ¡é›†æˆæµ‹è¯•
â””â”€â”€ e2e/                    # ç«¯åˆ°ç«¯æµ‹è¯•
    â”œâ”€â”€ auth_flow.py        # è®¤è¯æµç¨‹
    â”œâ”€â”€ agent_lifecycle.py  # Agentç”Ÿå‘½å‘¨æœŸ
    â””â”€â”€ task_execution.py   # ä»»åŠ¡æ‰§è¡Œæµç¨‹
```

#### E2E Tests
```
e2e/tests/
â”œâ”€â”€ user_authentication.spec.ts
â”œâ”€â”€ agent_management.spec.ts
â”œâ”€â”€ task_execution.spec.ts
â”œâ”€â”€ real_time_updates.spec.ts
â””â”€â”€ vnc_integration.spec.ts
```

### Test Examples

#### Frontend Component Test
```typescript
// frontend/tests/unit/components/AgentCard.spec.ts
import { mount } from '@vue/test-utils'
import { describe, it, expect } from 'vitest'
import AgentCard from '@/components/AgentCard.vue'
import type { Agent } from '@/types/agent'

describe('AgentCard', () => {
  it('renders agent information correctly', () => {
    const agent: Agent = {
      id: '1',
      name: 'Test Agent',
      description: 'Test description',
      status: 'idle',
      user_id: 'user1',
      config: {},
      created_at: new Date(),
      updated_at: new Date()
    }

    const wrapper = mount(AgentCard, {
      props: { agent }
    })

    expect(wrapper.text()).toContain('Test Agent')
    expect(wrapper.text()).toContain('Test description')
    expect(wrapper.find('.agent-status').text()).toBe('idle')
  })

  it('applies correct status class', () => {
    const agent = { ...mockAgent, status: 'running' }
    const wrapper = mount(AgentCard, { props: { agent } })

    expect(wrapper.find('.agent-status').classes()).toContain('status-running')
  })
})
```

#### Backend API Test
```python
# backend/tests/integration/api/test_agents.py
import pytest
from fastapi.testclient import TestClient
from app.main import app
from app.infrastructure.mongodb.database import get_database
from app.domain.models.user import User
from app.domain.models.agent import Agent

client = TestClient(app)

@pytest.fixture
async def test_user():
    user = User(
        username="testuser",
        email="test@example.com",
        password_hash="hashed_password"
    )
    await user.insert()
    return user

@pytest.fixture
async def test_agent(test_user):
    agent = Agent(
        user_id=test_user.id,
        name="Test Agent",
        config={"model": "gpt-3.5-turbo"}
    )
    await agent.insert()
    return agent

def test_get_agents_success(test_user, test_agent):
    """æµ‹è¯•è·å–Agentåˆ—è¡¨"""
    # è®¾ç½®è®¤è¯token
    token = create_access_token(test_user.id)
    headers = {"Authorization": f"Bearer {token}"}

    response = client.get("/api/agents", headers=headers)

    assert response.status_code == 200
    data = response.json()
    assert len(data) == 1
    assert data[0]["name"] == "Test Agent"

def test_create_agent_success(test_user):
    """æµ‹è¯•åˆ›å»ºæ–°Agent"""
    token = create_access_token(test_user.id)
    headers = {"Authorization": f"Bearer {token}"}

    agent_data = {
        "name": "New Agent",
        "description": "Test agent",
        "config": {
            "model": "gpt-3.5-turbo",
            "temperature": 0.7
        }
    }

    response = client.post("/api/agents", json=agent_data, headers=headers)

    assert response.status_code == 201
    data = response.json()
    assert data["name"] == "New Agent"
    assert data["user_id"] == str(test_user.id)
```

#### E2E Test
```typescript
// e2e/tests/agent_management.spec.ts
import { test, expect } from '@playwright/test'

test.describe('Agent Management', () => {
  test.beforeEach(async ({ page }) => {
    // ç™»å½•
    await page.goto('/login')
    await page.fill('[data-testid="username"]', 'testuser')
    await page.fill('[data-testid="password"]', 'password')
    await page.click('[data-testid="login-button"]')
    await expect(page).toHaveURL('/')
  })

  test('should create and view agent', async ({ page }) => {
    // åˆ›å»ºAgent
    await page.click('[data-testid="create-agent-button"]')
    await page.fill('[data-testid="agent-name"]', 'Test Agent')
    await page.fill('[data-testid="agent-description"]', 'Test description')
    await page.click('[data-testid="save-agent-button"]')

    // éªŒè¯åˆ›å»ºæˆåŠŸ
    await expect(page.locator('[data-testid="agent-list"]')).toContainText('Test Agent')

    // æŸ¥çœ‹Agentè¯¦æƒ…
    await page.click('[data-testid="agent-item"]:has-text("Test Agent")')
    await expect(page.locator('h1')).toContainText('Test Agent')
    await expect(page.locator('[data-testid="agent-description"]')).toContainText('Test description')
  })

  test('should execute task and show real-time updates', async ({ page }) => {
    // é€‰æ‹©Agent
    await page.click('[data-testid="agent-item"]:first-child')

    // åˆ›å»ºä»»åŠ¡
    await page.click('[data-testid="create-task-button"]')
    await page.selectOption('[data-testid="task-type"]', 'shell_command')
    await page.fill('[data-testid="task-input"]', 'echo "Hello World"')
    await page.click('[data-testid="execute-task-button"]')

    // éªŒè¯å®æ—¶çŠ¶æ€æ›´æ–°
    await expect(page.locator('[data-testid="task-status"]')).toContainText('running')
    await expect(page.locator('[data-testid="task-status"]')).toContainText('completed', { timeout: 10000 })
    await expect(page.locator('[data-testid="task-output"]')).toContainText('Hello World')
  })
})
```

---

## ğŸ“ ç¼–ç è§„èŒƒ

### Critical Fullstack Rules

- **Type Sharing:** å§‹ç»ˆåœ¨å‰ç«¯å’Œåç«¯é—´å…±äº«ç±»å‹å®šä¹‰ï¼Œç¡®ä¿æ¥å£ä¸€è‡´æ€§
- **API Calls:** ç»ä¸ç›´æ¥å‘èµ·HTTPè°ƒç”¨ - ä½¿ç”¨æœåŠ¡å±‚ç»Ÿä¸€å¤„ç†
- **Environment Variables:** åªé€šè¿‡é…ç½®å¯¹è±¡è®¿é—®ç¯å¢ƒå˜é‡ï¼Œç»ä¸ç›´æ¥ä½¿ç”¨process.env
- **Error Handling:** æ‰€æœ‰APIè·¯ç”±å¿…é¡»ä½¿ç”¨æ ‡å‡†é”™è¯¯å¤„ç†å™¨
- **State Updates:** ç»ä¸ç›´æ¥ä¿®æ”¹çŠ¶æ€ - ä½¿ç”¨é€‚å½“çš„çŠ¶æ€ç®¡ç†æ¨¡å¼
- **Database Access:** åªé€šè¿‡Repositoryæ¨¡å¼è®¿é—®æ•°æ®åº“ï¼Œä¸åœ¨æ§åˆ¶å™¨ä¸­ç›´æ¥æ“ä½œæ•°æ®åº“
- **Authentication:** æ‰€æœ‰å—ä¿æŠ¤çš„è·¯ç”±å¿…é¡»è¿›è¡Œè®¤è¯æ£€æŸ¥
- **Input Validation:** æ‰€æœ‰ç”¨æˆ·è¾“å…¥å¿…é¡»ç»è¿‡éªŒè¯å’Œæ¸…ç†
- **Logging:** å…³é”®æ“ä½œå¿…é¡»è®°å½•ç»“æ„åŒ–æ—¥å¿—
- **Testing:** æ ¸å¿ƒåŠŸèƒ½å¿…é¡»æœ‰å¯¹åº”çš„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•

### Naming Conventions

| å…ƒç´  | Frontend | Backend | ç¤ºä¾‹ |
|------|----------|---------|------|
| Components | PascalCase | - | `UserProfile.vue` |
| Hooks | camelCase with 'use' | - | `useAuth.ts` |
| API Routes | - | kebab-case | `/api/user-profile` |
| Functions | camelCase | snake_case | `getUserData()` / `get_user_data()` |
| Variables | camelCase | snake_case | `userName` / `user_name` |
| Constants | UPPER_SNAKE | UPPER_SNAKE | `API_BASE_URL` |
| Classes | PascalCase | PascalCase | `UserService` |
| Files | kebab-case | snake_case | `user-service.ts` / `user_service.py` |

---

## âš ï¸ é”™è¯¯å¤„ç†ç­–ç•¥

### Error Flow

```mermaid
sequenceDiagram
    participant C as Client
    participant G as Global Handler
    participant A as API Handler
    participant S as Service
    participant R as Repository
    participant L as Logger

    C->>A: API Request
    A->>S: Call Service
    S->>R: Database Operation
    R-->>S: Database Error
    S-->>A: Service Error (with context)
    A-->>G: HTTP Error Response
    G-->>L: Log Error
    G-->>C: Standardized Error Format
```

### Error Response Format

```typescript
interface ApiError {
  error: {
    code: string;
    message: string;
    details?: Record<string, any>;
    timestamp: string;
    requestId: string;
    stack?: string; // Only in development
  };
}
```

### Frontend Error Handling

```typescript
// composables/useErrorHandler.ts
import { ElMessage, ElNotification } from 'element-plus'
import type { ApiError } from '@/types/error'

export function useErrorHandler() {
  const handleError = (error: any) => {
    console.error('API Error:', error)

    if (error.response) {
      const apiError = error.response.data as ApiError

      switch (apiError.error.code) {
        case 'VALIDATION_ERROR':
          ElMessage.error('è¾“å…¥æ•°æ®éªŒè¯å¤±è´¥')
          break
        case 'UNAUTHORIZED':
          ElMessage.error('è¯·é‡æ–°ç™»å½•')
          // é‡å®šå‘åˆ°ç™»å½•é¡µé¢
          window.location.href = '/login'
          break
        case 'FORBIDDEN':
          ElMessage.error('æƒé™ä¸è¶³')
          break
        case 'NOT_FOUND':
          ElMessage.error('èµ„æºä¸å­˜åœ¨')
          break
        case 'RATE_LIMIT_EXCEEDED':
          ElMessage.warning('è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•')
          break
        default:
          ElMessage.error(apiError.error.message || 'è¯·æ±‚å¤±è´¥')
      }
    } else if (error.request) {
      ElMessage.error('ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®')
    } else {
      ElMessage.error('ç³»ç»Ÿé”™è¯¯ï¼Œè¯·è”ç³»ç®¡ç†å‘˜')
    }
  }

  return { handleError }
}

// åœ¨APIæœåŠ¡ä¸­ä½¿ç”¨
import { useErrorHandler } from '@/composables/useErrorHandler'

export const agentService = {
  async getAgents(): Promise<Agent[]> {
    try {
      const response = await apiClient.get<Agent[]>('/api/agents')
      return response.data
    } catch (error) {
      const { handleError } = useErrorHandler()
      handleError(error)
      throw error // é‡æ–°æŠ›å‡ºï¼Œè®©è°ƒç”¨è€…å¤„ç†
    }
  }
}
```

### Backend Error Handling

```python
# infrastructure/exceptions.py
from fastapi import HTTPException
from typing import Any, Dict, Optional

class BaseCustomException(Exception):
    def __init__(
        self,
        code: str,
        message: str,
        details: Optional[Dict[str, Any]] = None
    ):
        self.code = code
        self.message = message
        self.details = details
        super().__init__(self.message)

class ValidationError(BaseCustomException):
    def __init__(self, message: str, details: Optional[Dict[str, Any]] = None):
        super().__init__("VALIDATION_ERROR", message, details)

class NotFoundError(BaseCustomException):
    def __init__(self, resource: str):
        super().__init__("NOT_FOUND", f"{resource}ä¸å­˜åœ¨")

class UnauthorizedError(BaseCustomException):
    def __init__(self, message: str = "æœªæˆæƒè®¿é—®"):
        super().__init__("UNAUTHORIZED", message)

# interfaces/api/exceptions.py
from fastapi import Request, HTTPException
from fastapi.responses import JSONResponse
from infrastructure.exceptions import BaseCustomException
import uuid
import logging

logger = logging.getLogger(__name__)

async def exception_handler(request: Request, exc: BaseCustomException):
    """è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†å™¨"""
    request_id = str(uuid.uuid4())

    # è®°å½•é”™è¯¯æ—¥å¿—
    logger.error(
        f"Request {request_id} failed: {exc.code} - {exc.message}",
        extra={
            "request_id": request_id,
            "code": exc.code,
            "details": exc.details,
            "path": request.url.path,
            "method": request.method
        }
    )

    return JSONResponse(
        status_code=400,
        content={
            "error": {
                "code": exc.code,
                "message": exc.message,
                "details": exc.details,
                "timestamp": datetime.utcnow().isoformat(),
                "request_id": request_id
            }
        }
    )

async def general_exception_handler(request: Request, exc: Exception):
    """é€šç”¨å¼‚å¸¸å¤„ç†å™¨"""
    request_id = str(uuid.uuid4())

    logger.error(
        f"Unhandled exception in request {request_id}: {str(exc)}",
        extra={
            "request_id": request_id,
            "exception_type": type(exc).__name__,
            "path": request.url.path,
            "method": request.method
        },
        exc_info=True
    )

    return JSONResponse(
        status_code=500,
        content={
            "error": {
                "code": "INTERNAL_SERVER_ERROR",
                "message": "å†…éƒ¨æœåŠ¡å™¨é”™è¯¯",
                "timestamp": datetime.utcnow().isoformat(),
                "request_id": request_id
            }
        }
    )

# åœ¨main.pyä¸­æ³¨å†Œå¼‚å¸¸å¤„ç†å™¨
from fastapi import FastAPI
from interfaces.api.exceptions import exception_handler, general_exception_handler
from infrastructure.exceptions import BaseCustomException

app = FastAPI()

app.add_exception_handler(BaseCustomException, exception_handler)
app.add_exception_handler(Exception, general_exception_handler)
```

---

## ğŸ“Š ç›‘æ§å’Œå¯è§‚æµ‹æ€§

### Monitoring Stack

- **Frontend Monitoring:** è‡ªå®šä¹‰é”™è¯¯æ”¶é›†å’Œæ€§èƒ½ç›‘æ§
- **Backend Monitoring:** ç»“æ„åŒ–æ—¥å¿—å’ŒæŒ‡æ ‡æ”¶é›†
- **Error Tracking:** é›†ä¸­åŒ–é”™è¯¯å¤„ç†å’ŒæŠ¥å‘Š
- **Performance Monitoring:** APIå“åº”æ—¶é—´å’Œèµ„æºä½¿ç”¨ç›‘æ§

### Key Metrics

**Frontend Metrics:**
- Core Web Vitals (LCP, FID, CLS)
- JavaScripté”™è¯¯æ•°é‡å’Œç±»å‹
- APIå“åº”æ—¶é—´ï¼ˆæŒ‰ç«¯ç‚¹åˆ†ç±»ï¼‰
- ç”¨æˆ·äº¤äº’äº‹ä»¶ï¼ˆç‚¹å‡»ã€é¡µé¢è·³è½¬ç­‰ï¼‰
- èµ„æºåŠ è½½æ—¶é—´å’ŒæˆåŠŸç‡

**Backend Metrics:**
- APIè¯·æ±‚é€Ÿç‡ï¼ˆæŒ‰ç«¯ç‚¹å’ŒçŠ¶æ€ç åˆ†ç±»ï¼‰
- é”™è¯¯ç‡å’Œé”™è¯¯ç±»å‹åˆ†å¸ƒ
- å“åº”æ—¶é—´åˆ†å¸ƒï¼ˆP50, P95, P99ï¼‰
- æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½
- Dockerå®¹å™¨èµ„æºä½¿ç”¨æƒ…å†µ
- å†…å­˜å’ŒCPUä½¿ç”¨ç‡
- å¹¶å‘è¿æ¥æ•°
- é˜Ÿåˆ—é•¿åº¦å’Œå¤„ç†æ—¶é—´

```python
# infrastructure/monitoring.py
import time
import psutil
from functools import wraps
from fastapi import Request
import logging

logger = logging.getLogger(__name__)

def monitor_performance(func):
    """æ€§èƒ½ç›‘æ§è£…é¥°å™¨"""
    @wraps(func)
    async def wrapper(*args, **kwargs):
        start_time = time.time()
        try:
            result = await func(*args, **kwargs)

            # è®°å½•æ‰§è¡Œæ—¶é—´
            execution_time = time.time() - start_time
            logger.info(
                f"Function {func.__name__} executed in {execution_time:.3f}s",
                extra={
                    "function": func.__name__,
                    "execution_time": execution_time,
                    "status": "success"
                }
            )

            return result

        except Exception as e:
            execution_time = time.time() - start_time
            logger.error(
                f"Function {func.__name__} failed after {execution_time:.3f}s: {str(e)}",
                extra={
                    "function": func.__name__,
                    "execution_time": execution_time,
                    "status": "error",
                    "error_type": type(e).__name__
                },
                exc_info=True
            )

            raise

    return wrapper

async def log_request_metrics(request: Request, call_next):
    """è¯·æ±‚æŒ‡æ ‡ä¸­é—´ä»¶"""
    start_time = time.time()

    response = await call_next(request)

    # è®¡ç®—å¤„ç†æ—¶é—´
    process_time = time.time() - start_time

    # è®°å½•è¯·æ±‚æŒ‡æ ‡
    logger.info(
        f"Request processed",
        extra={
            "method": request.method,
            "path": request.url.path,
            "status_code": response.status_code,
            "process_time": process_time,
            "user_agent": request.headers.get("user-agent"),
            "remote_addr": request.client.host
        }
    )

    # æ·»åŠ å“åº”å¤´
    response.headers["X-Process-Time"] = str(process_time)

    return response

def get_system_metrics():
    """è·å–ç³»ç»ŸæŒ‡æ ‡"""
    return {
        "cpu_percent": psutil.cpu_percent(),
        "memory_percent": psutil.virtual_memory().percent,
        "disk_usage": psutil.disk_usage('/').percent,
        "load_average": psutil.getloadavg()[0] if hasattr(psutil, 'getloadavg') else None,
        "timestamp": time.time()
    }
```

```typescript
// frontend/composables/useMonitoring.ts
interface PerformanceMetric {
  name: string
  value: number
  timestamp: number
}

interface ErrorMetric {
  error: Error
  url: string
  userAgent: string
  timestamp: number
}

export function useMonitoring() {
  const metrics = ref<PerformanceMetric[]>([])
  const errors = ref<ErrorMetric[]>([])

  // ç›‘æ§Web Vitals
  const reportWebVitals = (metric: any) => {
    const performanceMetric: PerformanceMetric = {
      name: metric.name,
      value: metric.value,
      timestamp: Date.now()
    }

    metrics.value.push(performanceMetric)

    // å‘é€åˆ°åç«¯è¿›è¡Œèšåˆ
    if (metric.name === 'LCP' && metric.value > 2500) {
      console.warn('LCP warning:', metric.value)
    }
  }

  // ç›‘æ§APIå“åº”æ—¶é—´
  const monitorApiResponse = (url: string, method: string, duration: number, status: number) => {
    const metric: PerformanceMetric = {
      name: `api_${method}_${status}`,
      value: duration,
      timestamp: Date.now()
    }

    metrics.value.push(metric)

    // æ…¢æŸ¥è¯¢å‘Šè­¦
    if (duration > 2000) {
      console.warn('Slow API call:', { url, method, duration, status })
    }
  }

  // ç›‘æ§JavaScripté”™è¯¯
  const handleGlobalError = (event: ErrorEvent) => {
    const errorMetric: ErrorMetric = {
      error: event.error,
      url: event.filename,
      userAgent: navigator.userAgent,
      timestamp: Date.now()
    }

    errors.value.push(errorMetric)

    // å‘é€é”™è¯¯æŠ¥å‘Šåˆ°åç«¯
    sendErrorReport(errorMetric)
  }

  const sendErrorReport = async (errorMetric: ErrorMetric) => {
    try {
      await fetch('/api/errors/report', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          message: errorMetric.error.message,
          stack: errorMetric.error.stack,
          url: errorMetric.url,
          userAgent: errorMetric.userAgent,
          timestamp: errorMetric.timestamp
        })
      })
    } catch (e) {
      console.error('Failed to report error:', e)
    }
  }

  // è®¾ç½®å…¨å±€é”™è¯¯ç›‘å¬
  onMounted(() => {
    window.addEventListener('error', handleGlobalError)
  })

  onUnmounted(() => {
    window.removeEventListener('error', handleGlobalError)
  })

  return {
    metrics: readonly(metrics),
    errors: readonly(errors),
    reportWebVitals,
    monitorApiResponse
  }
}
```

---

## âœ… æ£€æŸ¥æ¸…å•ç»“æœæŠ¥å‘Š

åœ¨è¿è¡Œå®Œæ•´çš„æ¶æ„å¸ˆæ£€æŸ¥æ¸…å•ä¹‹å‰ï¼Œæˆ‘å»ºè®®è¾“å‡ºæ­¤å®Œæ•´çš„æ¶æ„æ–‡æ¡£ä»¥ä¾›å®¡æŸ¥ã€‚è¯¥æ–‡æ¡£æ¶µç›–äº†AI Manusé¡¹ç›®çš„å®Œæ•´å…¨æ ˆæ¶æ„è®¾è®¡ï¼ŒåŒ…æ‹¬ï¼š

1. âœ… **å®Œæ•´çš„ç³»ç»Ÿæ¶æ„æ¦‚è¿°** - å¾®æœåŠ¡+DDD+å®¹å™¨åŒ–
2. âœ… **è¯¦ç»†çš„æŠ€æœ¯æ ˆé€‰æ‹©** - å‰åç«¯å®Œæ•´æŠ€æœ¯æ ˆåŠé€‰æ‹©ç†ç”±
3. âœ… **æ•°æ®æ¨¡å‹è®¾è®¡** - æ ¸å¿ƒå®ä½“å’ŒTypeScriptæ¥å£å®šä¹‰
4. âœ… **APIè§„èŒƒ** - RESTful APIå®Œæ•´å®šä¹‰
5. âœ… **ç»„ä»¶è®¾è®¡** - å‰åç«¯ç»„ä»¶æ¶æ„å’Œä¾èµ–å…³ç³»
6. âœ… **æ•°æ®åº“æ¶æ„** - MongoDBå’ŒRedisæ•°æ®ç»“æ„è®¾è®¡
7. âœ… **å‰ç«¯æ¶æ„** - Vue 3 + TypeScriptå®Œæ•´æ¶æ„
8. âœ… **åç«¯æ¶æ„** - FastAPI + DDDå®Œæ•´å®ç°
9. âœ… **éƒ¨ç½²ç­–ç•¥** - å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒé…ç½®
10. âœ… **å®‰å…¨å’Œæ€§èƒ½** - å…¨é¢çš„å®‰å…¨å’Œæ€§èƒ½è€ƒè™‘
11. âœ… **æµ‹è¯•ç­–ç•¥** - å®Œæ•´çš„æµ‹è¯•é‡‘å­—å¡”å’Œç¤ºä¾‹
12. âœ… **ç¼–ç è§„èŒƒ** - è·¨æ ˆç»Ÿä¸€çš„ç¼–ç æ ‡å‡†
13. âœ… **é”™è¯¯å¤„ç†** - ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶
14. âœ… **ç›‘æ§æ–¹æ¡ˆ** - å¯è§‚æµ‹æ€§è§£å†³æ–¹æ¡ˆ

**æ¶æ„æ–‡æ¡£å®Œæˆåº¦**: ğŸ’¯ å®Œæ•´è¦†ç›–å…¨æ ˆç³»ç»Ÿè®¾è®¡

---

## ğŸ“ æ–‡æ¡£çŠ¶æ€

**å½“å‰çŠ¶æ€**: å·²å®Œæˆ (YOLOæ¨¡å¼ç”Ÿæˆ)
**æ–‡æ¡£è´¨é‡**: ç”Ÿäº§å°±ç»ª
**æ¶æ„ä¸€è‡´æ€§**: âœ… ä¸ç°æœ‰DDDæ¶æ„å’ŒPRDä¿æŒä¸€è‡´
**æŠ€æœ¯å¯è¡Œæ€§**: âœ… åŸºäºç°æœ‰æŠ€æœ¯æ ˆæ‰©å±•ï¼Œé«˜åº¦å¯è¡Œ

**ä¸‹ä¸€æ­¥è¡ŒåŠ¨**:
- [ ] æŠ€æœ¯å›¢é˜Ÿå®¡æŸ¥æ¶æ„æ–¹æ¡ˆ
- [ ] åˆ›å»ºé¡¹ç›®å®æ–½Sprintè§„åˆ’
- [ ] å¼€å§‹MVPåŠŸèƒ½å¼€å‘

---
*æœ¬æ–‡æ¡£å·²ä¸ºAI Manuså…¨æ ˆç³»ç»Ÿæä¾› complete architecture guidanceï¼Œå¯ç›´æ¥ç”¨äºå¼€å‘å®æ–½ã€‚æ–‡æ¡£ç”Ÿæˆæ—¶é—´: 2025-11-04*